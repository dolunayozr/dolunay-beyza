<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <title>Dolunay ğŸ’– Sufle</title>

    <style>
        body {
            margin: 0;
            font-family: 'Comic Sans MS', cursive;
            text-align: center;
            color: #5a2a4a;
            background: url("https://media.giphy.com/media/26tn33aiTi1jkl6H6/giphy.gif") no-repeat center/cover fixed;
        }
        
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: rgba(255, 200, 220, .6);
            backdrop-filter: blur(2px);
            z-index: -1;
        }
        
        .fullscreen {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .box {
            background: rgba(255, 255, 255, .92);
            padding: 45px;
            border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, .25);
            max-width: 520px;
            animation: fade 1.2s;
        }
        
        @keyframes fade {
            from {
                opacity: 0;
                transform: scale(.9);
            }
            to {
                opacity: 1;
            }
        }
        
        .melt {
            opacity: 0;
            transform: translateY(120px) scale(.8);
            filter: blur(12px);
            transition: 1s;
        }
        
        button {
            padding: 14px 30px;
            border-radius: 40px;
            border: none;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
            background: linear-gradient(135deg, #ff9eb8, #ffb6c1);
            color: white;
            transition: .25s;
        }
        
        button:hover {
            transform: scale(1.08);
        }
        
        .cat {
            width: 220px;
            margin-top: 15px;
        }
        
        .choice-btn {
            display: block;
            width: 100%;
            margin: 12px auto;
        }
        
        .ending {
            font-size: 38px;
            color: white;
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from {
                text-shadow: 0 0 10px #ffb6c1;
            }
            to {
                text-shadow: 0 0 25px #fff;
            }
        }
    </style>
</head>

<body>

    <audio id="music" loop muted autoplay>
  <source src="sounds/music.mp3">
</audio>

    <script>
        const state = localStorage.getItem("endingState");

        if (state === "ending") {
            showEnding();
        } else {
            showStory();
        }

        function showEnding() {
            localStorage.removeItem("endingState");
            document.body.innerHTML = `
    <div class="fullscreen">
      <div class="ending">âœ¨ Sonsuz Mutlu Son âœ¨</div>
    </div>
  `;
        }

        function showStory() {
            document.body.innerHTML += `
<div id="intro" class="fullscreen">
  <div class="box" id="introBox">
    <h1>Dolunayâ€™Ä± seviyor musun? ğŸ’•</h1>
    <button onclick="startLove()">ğŸ’– Evet ğŸ’–</button>
    <button onclick="startLove()">ğŸ¥° Evet ğŸ¥°</button>
  </div>
</div>

<div id="main" style="display:none;">
  <h1>ğŸ’— HoÅŸ geldin aÅŸkÄ±m ğŸ’—</h1>

  <div class="box">
    <p>
      Dolunayâ€¦<br><br>
      Bu hikÃ¢ye kÃ¼Ã§Ã¼k bir siteyle baÅŸladÄ±  
      ama hisleri kocaman ğŸ’–
    </p>
    <button onclick="startStory()">ğŸ“– Devam Et</button>
  </div>

  <div class="box" id="storyBox" style="display:none;">
    <h3>âœ¨ HikÃ¢ye daha yeni baÅŸlÄ±yorâ€¦ âœ¨</h3>
    <button class="choice-btn" onclick="choiceOne()">1ï¸âƒ£ Ä°lk tanÄ±ÅŸtÄ±ÄŸÄ±nda bÃ¶yle olacaÄŸÄ±nÄ± dÃ¼ÅŸÃ¼nÃ¼yor muydun?</button>
    <button class="choice-btn" onclick="choiceTwo()">2ï¸âƒ£ Sadece flÃ¶rt ederiz mi diyordun?</button>
  </div>

  <div class="box" id="resultBox" style="display:none;"></div>
</div>
`;
        }

        document.body.addEventListener("click", () => {
            const m = document.getElementById("music");
            if (m && m.muted) {
                m.muted = false;
                m.volume = .5;
                m.play();
            }
        }, {
            once: true
        });

        function meow() {
            const sound = new Audio("sounds/meow.mp3");
            sound.currentTime = 0;
            sound.play();
        }

        function startLove() {
            introBox.classList.add("melt");
            setTimeout(() => {
                intro.style.display = "none";
                main.style.display = "block";
            }, 900);
        }

        function startStory() {
            storyBox.style.display = "block";
        }

        function choiceOne() {
            showResult("Her ne dÃ¼ÅŸÃ¼ndÃ¼ysen bir Ã¶nemi yok, iyi ki beraberiz ğŸ’–");
        }

        function choiceTwo() {
            showResult("Yok Ã¶yle sadece flÃ¶rt :D<br><br>ArtÄ±k beraber her ÅŸeyde, her durumda ğŸ’•");
        }

        function showResult(text) {
            resultBox.style.display = "block";
            resultBox.innerHTML = `
    <p>${text}</p>
    <img class="cat"
         src="https://media.giphy.com/media/VbnUQpnihPSIgIXuZv/giphy.gif"
         onclick="meow()"
         style="cursor:pointer;">
    <p><b>Sufle ğŸˆâ€â¬›</b></p>
    <div class="box">ğŸ” Åimdi sayfayÄ± yenile</div>
  `;
            localStorage.setItem("endingState", "ending");
        }
    </script>

</body>

</html>